{"version":3,"file":"0.js","sources":["webpack:///./components/SendingQuery.js","webpack:///./components/layout/Newsletter.js","webpack:///./node_modules/@babel/runtime-corejs2/core-js/json/stringify.js"],"sourcesContent":["const SendingQuery = (props) => {\n  const ellipse = React.useRef();\n  const tick = React.useRef();\n  const text = React.useRef();\n\n  React.useEffect(() => {\n    setTimeout(() => {\n      ellipse.current.classList.add('stopEllipse');\n      tick.current.classList.add('showTick');\n      text.current.classList.add('showText');\n    }, 2000);\n  }, [])\n\n  return(\n    <div className=\"sendingQuery\">\n\n      <svg ref={ellipse} className=\"sendingQuery-ellipse\" viewBox=\"0 0 244 244\">\n        <defs>\n          <linearGradient id=\"sendingGradient\" x1=\"33.68\" y1=\"33.68\" x2=\"206.22\" y2=\"206.22\" gradientUnits=\"userSpaceOnUse\">\n            <stop offset=\"0.15\" stopColor={props.color} stopOpacity=\"0\"/>\n            <stop offset=\"0.25\" stopColor={props.color} stopOpacity=\"0.22\"/>\n            <stop offset=\"0.38\" stopColor={props.color} stopOpacity=\"0.45\"/>\n            <stop offset=\"0.51\" stopColor={props.color} stopOpacity=\"0.65\"/>\n            <stop offset=\"0.64\" stopColor={props.color} stopOpacity=\"0.8\"/>\n            <stop offset=\"0.76\" stopColor={props.color} stopOpacity=\"0.91\"/>\n            <stop offset=\"0.88\" stopColor={props.color} stopOpacity=\"0.98\"/>\n            <stop offset=\"1\" stopColor={props.color}/>\n          </linearGradient>\n        </defs>\n        <path fill=\"url(#sendingGradient)\" d=\"M122,0A122,122,0,1,0,244,122,122,122,0,0,0,122,0Zm0,236.5A114.5,114.5,0,1,1,236.5,122,114.5,114.5,0,0,1,122,236.5Z\"/>\n      </svg>\n\n      <svg ref={tick} className=\"sendingQuery-tick\" viewBox=\"0 0 138.35 99.15\">\n        <path fill={props.color} d=\"M.85,42.5c2.41,1.55,4.74,3.17,7,4.84s4.57,3.34,6.79,5.08c4.47,3.45,8.82,7,13.09,10.66s8.45,7.38,12.57,11.18S48.42,82,52.27,86.07h-8.7c7.75-7.25,15.81-14.19,23.5-21.5S82.54,50,90.37,42.87l11.71-10.79,11.76-10.74Q125.62,10.61,137.5,0l.85.85Q127.73,12.73,117,24.51L106.27,36.27,95.48,48C88.31,55.81,81,63.51,73.78,71.28S59.53,87,52.27,94.77l-4.09,4.38-4.61-4.38c-4.06-3.85-8-7.81-11.81-11.93s-7.54-8.29-11.18-12.57S13.37,61.65,9.92,57.18C8.18,55,6.5,52.68,4.84,50.39s-3.29-4.63-4.84-7Z\"/>\n      </svg>\n\n      <p ref={text} className=\"sendingQuery-message\" >{props.message}</p>\n\n      <style jsx>{`\n        @keyframes rotate {\n          0% {\n            transform: rotate(0deg);\n          }\n          to {\n            transform: rotate(360deg);\n          }\n        }\n        .sendingQuery {\n          width: 200px;\n          position: relative;\n        }\n        .sendingQuery-ellipse{\n          transition: .5s all;\n          animation: rotate 1s linear infinite;\n        }\n        .sendingQuery-tick {\n          position: absolute;\n          transition: .5s all;\n          width: 0;\n          top: 50%;\n          left: 50%;\n          transform: translate(-50%, -50%);\n        }\n        .sendingQuery-message {\n          text-align: center;\n          position: absolute;\n          text-transform: uppercase;\n          letter-spacing: 1.6px;\n          left: 0;\n          right: 0;\n          opacity: 0;\n          transition: .5s all;\n          bottom: -60%;\n        }\n        .stopEllipse {\n          opacity: 0;\n          transition: .5s all;\n        }\n        .showTick {\n          transition: .5s all ease-out;\n          width: 100px;\n        }\n        .showText{\n          transition: .5s all;\n          opacity: 1;\n          bottom: -50%;\n        }\n      `}</style>\n\n    </div>\n  )\n}\n\nexport default SendingQuery;","import parse from 'html-react-parser';\nimport { useForm } from \"react-hook-form\";\nimport SendingQuery from '../SendingQuery';\n\nconst Newsletter = ({ data }) => {\n\n\tconst [accessToken, setAccessToken] = React.useState('');\n\n\tconst n2goHeaders = new Headers();\n\tn2goHeaders.append(\"Content-Type\", \"application/json\");\n\tn2goHeaders.append(\"Authorization\", \"Basic \" + Buffer.from(process.env.NEWSLETTER_API_KEY).toString('base64'));\n\n\tconst n2goBody = JSON.stringify({\n\t\t\"username\": process.env.NEWSLETTER_USER,\n\t\t\"password\": process.env.NEWSLETTER_PASS,\n\t\t\"grant_type\": \"https://nl2go.com/jwt\"\n\t});\n\n\tconst requestOpts = {\n\t\tmethod: 'POST',\n\t\theaders: n2goHeaders,\n\t\tbody: n2goBody,\n\t\tredirect: 'follow'\n\t};\n\n\tconst connectToNewsletter = () => {\n\t\tfetch(`${process.env.NEWSLETTER_API_HOST}/oauth/v2/token`, requestOpts)\n\t\t\t.then(response => response.json())\n\t\t\t.then(result => {\n\t\t\t\tsetAccessToken(result.access_token)\n\t\t\t\tlocalStorage.setItem('newsletter', result.access_token)\n\t\t\t})\n\t\t\t.catch(error => console.log('error', error));\n\t}\n\n\tReact.useEffect(() => {\n\t\t// localStorage.getItem('newsletter') === null &&\n\t\t\tconnectToNewsletter();\n\t}, [])\n\n\tconst [registerResponse, setRegisterResponse] = React.useState({});\n\tconst newsletterForm = React.useRef();\n\n\tconst registerNewsletterUser = (name, surname, email, gender, token) => {\n\t\tconst n2goRegisterHeaders = new Headers();\n\t\tn2goRegisterHeaders.append(\"Content-Type\", \"application/json\");\n\t\tn2goRegisterHeaders.append(\"Authorization\", \"Bearer \" + token);\n\n\t\tconst n2goRegisterBody = JSON.stringify({\n\t\t\t\"list_id\": \"r9s81zk7\",\n\t\t\t\"email\": email,\n\t\t\t\"gender\": gender === 'Herr' || 'Mr.' ? 'm' : 'f',\n\t\t\t\"first_name\": name,\n\t\t\t\"last_name\": surname,\n\t\t\t\"is_unsubscribed\": false,\n\t\t\t\"is_blacklisted\": false,\n\t\t});\n\n\t\tconst registerRequestOpts = {\n\t\t\tmethod: 'POST',\n\t\t\theaders: n2goRegisterHeaders,\n\t\t\tbody: n2goRegisterBody,\n\t\t\tredirect: 'follow'\n\t\t};\n\n\t\tfetch(`${process.env.NEWSLETTER_API_HOST}/recipients`, registerRequestOpts)\n\t\t\t.then(response => response.text())\n\t\t\t.then(result => {\n\t\t\t\tsetRegisterResponse(JSON.parse(result))\n\t\t\t})\n\t\t\t.catch(error => console.log('error', error));\n\t}\n\n\tReact.useEffect(() => {\n\t\tregisterResponse.status === 200 &&\n\t\t\tnewsletterForm.current.classList.add('newsletterHide');\n\t}, [registerResponse, setRegisterResponse])\n\n\tconst { handleSubmit, register, errors } = useForm();\n\tconst onSubmit = values => {\n\t\tregisterNewsletterUser(values.vorname, values.name, values.email, values.anrede, accessToken);\n\t};\n\n\treturn (\n\t\t<div id=\"newsletter\" className=\"newsletter\">\n\n\t\t\t<div className=\"newsletter__block\">\n\t\t\t\t<h3>Newsletter</h3>\n\t\t\t\t<p>{data.subtitel}</p>\n\t\t\t</div>\n\n\t\t\t<form onSubmit={handleSubmit(onSubmit)} ref={newsletterForm} className=\"newsletter__form\">\n\n\t\t\t\t<div className=\"newsletter__form--block\">\n\n\t\t\t\t\t<div className=\"newsletter__form--field\">\n\t\t\t\t\t\t<label htmlFor=\"vorname\">{data.vorname}</label>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tname=\"vorname\"\n\t\t\t\t\t\t\tref={register({\n\t\t\t\t\t\t\t\tpattern: /^[A-Za-z]+$/i,\n\t\t\t\t\t\t\t\tvalidate: value => value !== \"admin\" || \"Nice try!\"\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t{errors.vorname && errors.vorname.message}\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div className=\"newsletter__form--field\">\n\t\t\t\t\t\t<label htmlFor=\"name\">{data.name}</label>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tname=\"name\"\n\t\t\t\t\t\t\tref={register({\n\t\t\t\t\t\t\t\tpattern: /^[A-Za-z]+$/i,\n\t\t\t\t\t\t\t\tvalidate: value => value !== \"admin\" || \"Nice try!\"\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t{errors.name && errors.name.message}\n\t\t\t\t\t</div>\n\n\t\t\t\t</div>\n\n\t\t\t\t<div className=\"newsletter__form--block\">\n\n\t\t\t\t\t<div className=\"newsletter__form--field\">\n\t\t\t\t\t\t<label htmlFor=\"anrede\">{data.anrede.value}</label>\n\t\t\t\t\t\t<select name=\"anrede\" ref={register}>\n\t\t\t\t\t\t\t<optgroup>\n\t\t\t\t\t\t\t\t<option value={data.anrede.herr}>{data.anrede.herr}</option>\n\t\t\t\t\t\t\t\t<option value={data.anrede.frau}>{data.anrede.frau}</option>\n\t\t\t\t\t\t\t</optgroup>\n\t\t\t\t\t\t</select>\n\t\t\t\t\t\t{errors.anrede && errors.anrede.message}\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div className=\"newsletter__form--field\">\n\t\t\t\t\t\t<label htmlFor=\"email\">{data.email}</label>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tname=\"email\"\n\t\t\t\t\t\t\tref={register({\n\t\t\t\t\t\t\t\trequired: data.fehlerfelder.required,\n\t\t\t\t\t\t\t\tpattern: {\n\t\t\t\t\t\t\t\t\tvalue: /^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,4}$/i,\n\t\t\t\t\t\t\t\t\tmessage: data.fehlerfelder.invalid\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t{errors.email && errors.email.message}\n\t\t\t\t\t</div>\n\n\t\t\t\t</div>\n\n\t\t\t\t<div className=\"newsletter__datenschutz\">\n\t\t\t\t\t{parse(data.datenschutz.text)}\n\t\t\t\t\t<input className=\"input__radio\" type=\"checkbox\" required name=\"acceptance\" />\n\t\t\t\t\t<label className=\"label__radio\" htmlFor=\"acceptance\">{data.datenschutz.checkbox}</label>\n\t\t\t\t\t{parse(data.datenschutz.extra)}\n\t\t\t\t</div>\n\n\t\t\t\t<button type=\"submit\" className=\"golden__button\">{data.datenschutz.button}</button>\n\n\t\t\t</form>\n\n\t\t\t{\n\t\t\t\tregisterResponse.status === 200 &&\n\t\t\t\t <SendingQuery color=\"#C2AC84\" message={`Danke fÃ¼r die Registrierung.`} />\n\t\t\t}\n\n\t\t</div>\n\t)\n};\n\nexport default Newsletter;","module.exports = require(\"core-js/library/fn/json/stringify\");"],"mappings":";;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAAA;AAEA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAtBA;AAAA;AA6EA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;AC7FA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAHA;AACA;AAKA;AACA;AACA;AACA;AACA;AAJA;AACA;AAMA;AACA;AAGA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA;AACA;AASA;AACA;AACA;AACA;AACA;AAJA;AAOA;AAGA;AACA;AAEA;AACA;AACA;AACA;AAEA;AAEA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAEA;AAAA;AAKA;AAAA;AAAA;AAAA;AAEA;AAAA;AAEA;AAAA;AACA;AAAA;AAEA;AACA;AACA;AACA;AAFA;AAFA;AAUA;AAAA;AACA;AAAA;AAEA;AACA;AACA;AACA;AAFA;AAFA;AAYA;AAAA;AAEA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAEA;AAAA;AACA;AAAA;AAMA;AAAA;AACA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AAFA;AAFA;AAFA;AAeA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAIA;AAAA;AAAA;AAMA;AAAA;AAAA;AAKA;AACA;AACA;;;;;;;;;;;AC3KA;;;;A","sourceRoot":""}