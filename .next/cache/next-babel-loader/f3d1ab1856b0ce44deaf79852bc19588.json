{"ast":null,"code":"import _JSON$stringify from \"@babel/runtime-corejs2/core-js/json/stringify\";\nimport _slicedToArray from \"@babel/runtime-corejs2/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/urbandruid/repos/goldendoor-next/components/layout/Newsletter.js\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport parse from 'html-react-parser';\n\nvar Newsletter = function Newsletter(_ref) {\n  var data = _ref.data;\n\n  var _React$useState = React.useState(''),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      accessToken = _React$useState2[0],\n      setAccessToken = _React$useState2[1];\n\n  var n2goHeaders = new Headers();\n  n2goHeaders.append(\"Content-Type\", \"application/json\");\n  n2goHeaders.append(\"Authorization\", \"Basic \" + Buffer.from(process.env.NEWSLETTER_API_KEY).toString('base64'));\n\n  var n2goBody = _JSON$stringify({\n    \"username\": process.env.NEWSLETTER_USER,\n    \"password\": process.env.NEWSLETTER_PASS,\n    \"grant_type\": \"https://nl2go.com/jwt\"\n  });\n\n  var requestOptions = {\n    method: 'POST',\n    headers: n2goHeaders,\n    body: n2goBody,\n    redirect: 'follow'\n  };\n\n  var connectToNewsletter = function connectToNewsletter() {\n    fetch(\"\".concat(process.env.NEWSLETTER_API_HOST, \"/oauth/v2/token\"), requestOptions).then(function (response) {\n      return response.json();\n    }).then(function (result) {\n      return setAccessToken(result.access_token);\n    })[\"catch\"](function (error) {\n      return console.log('error', error);\n    });\n  };\n\n  React.useEffect(function () {\n    connectToNewsletter();\n    console.log(accessToken);\n  }, []);\n  return __jsx(\"div\", {\n    id: \"newsletter\",\n    className: \"newsletter\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: \"newsletter__block\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39\n    },\n    __self: this\n  }, __jsx(\"h3\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40\n    },\n    __self: this\n  }, \"Newsletter\"), __jsx(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41\n    },\n    __self: this\n  }, data.subtitel)), __jsx(\"form\", {\n    className: \"newsletter__form\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: \"newsletter__form--block\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: \"newsletter__form--field\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48\n    },\n    __self: this\n  }, __jsx(\"label\", {\n    htmlFor: \"surname\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49\n    },\n    __self: this\n  }, data.vorname), __jsx(\"input\", {\n    required: true,\n    type: \"text\",\n    name: \"surname\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50\n    },\n    __self: this\n  })), __jsx(\"div\", {\n    className: \"newsletter__form--field\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53\n    },\n    __self: this\n  }, __jsx(\"label\", {\n    htmlFor: \"name\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54\n    },\n    __self: this\n  }, data.name), __jsx(\"input\", {\n    required: true,\n    type: \"text\",\n    name: \"name\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55\n    },\n    __self: this\n  }))), __jsx(\"div\", {\n    className: \"newsletter__form--block\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: \"newsletter__form--field\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61\n    },\n    __self: this\n  }, __jsx(\"label\", {\n    htmlFor: \"email\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62\n    },\n    __self: this\n  }, data.email), __jsx(\"input\", {\n    required: true,\n    type: \"email\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63\n    },\n    __self: this\n  }))), __jsx(\"div\", {\n    className: \"newsletter__datenschutz\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67\n    },\n    __self: this\n  }, parse(data.datenschutz.text), __jsx(\"input\", {\n    type: \"checkbox\",\n    required: true,\n    name: \"acceptance\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69\n    },\n    __self: this\n  }), __jsx(\"label\", {\n    htmlFor: \"acceptance\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70\n    },\n    __self: this\n  }, data.datenschutz.checkbox), parse(data.datenschutz.extra)), __jsx(\"input\", {\n    type: \"submit\",\n    className: \"golden__button\",\n    value: data.datenschutz.button,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74\n    },\n    __self: this\n  })));\n};\n\nexport default Newsletter;","map":{"version":3,"sources":["/home/urbandruid/repos/goldendoor-next/components/layout/Newsletter.js"],"names":["parse","Newsletter","data","React","useState","accessToken","setAccessToken","n2goHeaders","Headers","append","Buffer","from","process","env","NEWSLETTER_API_KEY","toString","n2goBody","NEWSLETTER_USER","NEWSLETTER_PASS","requestOptions","method","headers","body","redirect","connectToNewsletter","fetch","NEWSLETTER_API_HOST","then","response","json","result","access_token","error","console","log","useEffect","subtitel","vorname","name","email","datenschutz","text","checkbox","extra","button"],"mappings":"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","sourcesContent":["import parse from 'html-react-parser';\n\nconst Newsletter = ({ data }) => {\n\n\tconst [accessToken, setAccessToken] = React.useState('');\n\n\tconst n2goHeaders = new Headers();\n\tn2goHeaders.append(\"Content-Type\", \"application/json\");\n\tn2goHeaders.append(\"Authorization\", \"Basic \" + Buffer.from(process.env.NEWSLETTER_API_KEY).toString('base64'));\n\n\tconst n2goBody = JSON.stringify({\n\t\t\"username\": process.env.NEWSLETTER_USER,\n\t\t\"password\": process.env.NEWSLETTER_PASS,\n\t\t\"grant_type\": \"https://nl2go.com/jwt\"\n\t});\n\n\tconst requestOptions = {\n\t\tmethod: 'POST',\n\t\theaders: n2goHeaders,\n\t\tbody: n2goBody,\n\t\tredirect: 'follow'\n\t};\n\n\tconst connectToNewsletter = () => {\n\t\tfetch(`${process.env.NEWSLETTER_API_HOST}/oauth/v2/token`, requestOptions)\n\t\t\t.then(response => response.json())\n\t\t\t.then(result => setAccessToken(result.access_token))\n\t\t\t.catch(error => console.log('error', error));\n\t}\n\n\tReact.useEffect(() => {\n\t\tconnectToNewsletter();\n\t\tconsole.log(accessToken)\n\t}, [])\n\n\treturn (\n\t\t<div id=\"newsletter\" className=\"newsletter\">\n\n\t\t\t<div className=\"newsletter__block\">\n\t\t\t\t<h3>Newsletter</h3>\n\t\t\t\t<p>{data.subtitel}</p>\n\t\t\t</div>\n\n\t\t\t<form className=\"newsletter__form\">\n\n\t\t\t\t<div className=\"newsletter__form--block\">\n\n\t\t\t\t\t<div className=\"newsletter__form--field\">\n\t\t\t\t\t\t<label htmlFor=\"surname\">{data.vorname}</label>\n\t\t\t\t\t\t<input required type=\"text\" name=\"surname\" />\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div className=\"newsletter__form--field\">\n\t\t\t\t\t\t<label htmlFor=\"name\">{data.name}</label>\n\t\t\t\t\t\t<input required type=\"text\" name=\"name\" />\n\t\t\t\t\t</div>\n\n\t\t\t\t</div>\n\n\t\t\t\t<div className=\"newsletter__form--block\">\n\t\t\t\t\t<div className=\"newsletter__form--field\">\n\t\t\t\t\t\t<label htmlFor=\"email\">{data.email}</label>\n\t\t\t\t\t\t<input required type=\"email\" />\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div className=\"newsletter__datenschutz\">\n\t\t\t\t\t{parse(data.datenschutz.text)}\n\t\t\t\t\t<input type=\"checkbox\" required name=\"acceptance\" />\n\t\t\t\t\t<label htmlFor=\"acceptance\">{data.datenschutz.checkbox}</label>\n\t\t\t\t\t{parse(data.datenschutz.extra)}\n\t\t\t\t</div>\n\n\t\t\t\t<input type=\"submit\" className=\"golden__button\" value={data.datenschutz.button} />\n\n\t\t\t</form>\n\n\t\t</div>\n\t)\n};\n\nexport default Newsletter;"]},"metadata":{},"sourceType":"module"}