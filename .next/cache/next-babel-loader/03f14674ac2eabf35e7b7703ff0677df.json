{"ast":null,"code":"import _Array$from from \"@babel/runtime-corejs2/core-js/array/from\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport LoopingItem from './LoopingItem';\n\nconst openCarousel = e => {\n  const imgID = e.currentTarget.classList[1];\n  const mainContainer = e.currentTarget.parentElement.parentElement.parentElement;\n  mainContainer.lastElementChild.classList.add('show');\n  setTimeout(() => {\n    mainContainer.lastElementChild.classList.add('gallerySliderOpen');\n    setTimeout(() => {\n      mainContainer.lastElementChild.lastElementChild.classList.add('gallerySliderBlockOpen');\n    }, 750);\n  }, 10);\n  const elementInCarousel = mainContainer.lastElementChild.getElementsByClassName(`img-${imgID}`);\n  const elementInCarouselIndex = elementInCarousel[0].getAttribute('slideindex');\n  mainContainer.lastElementChild.lastElementChild.lastElementChild.lastElementChild.children[elementInCarouselIndex].click();\n}; //FUNCTION FOR CLONING THE CHILDREN OF A DOM NODE.\n\n\nconst cloneChildren = el => {\n  let items = _Array$from(el.childNodes);\n\n  items.forEach(function (item) {\n    var clone = item.cloneNode(true);\n    clone.addEventListener('click', openCarousel);\n    el.appendChild(clone);\n  });\n};\n\nconst LoopingRow = props => {\n  //INITIAL DOM WITH IS 0 BECAUSE IMAGES WILL CHANGE SIZE DEPENDING ON SCREEN SIZE\n  const [width, setWidth] = React.useState(0);\n  const [canStart, setCanStart] = React.useState(false);\n  const [transition] = React.useState(150); //AS A CALLBACK FUNCTION LOADED ITEM SENDS ITS WIDTH TO ROW ELEMENTS' STATE\n  //AND WITH THE HELP OF REACT.MEMO zROW ELEMENT DOESN'T RE-RENDER\n\n  const measure = React.useCallback(n => {\n    setWidth(c => Math.round((c + n) * 100) / 100);\n    setCanStart(true);\n  }, [setWidth]);\n  const galleryRow = React.useRef(); //THIS CUSTOM HOOK IS FOR TESTING RENDERING COUNT\n  // useCountRenders();\n  // React.useEffect(() => {\n  // \tconsole.log(galleryRow.current.parentElement.querySelectorAll('.looping_gallery_item'))\n  // }, [])\n\n  React.useEffect(() => {\n    //COMPONENTDIDMOUNT\n    let row = galleryRow.current; // console.log(`Rows have mounted.`)\n    //IF ROW IS ABLE START TO ANIMATE AND ITS' WIDTH IS CALCULATED,\n    //THEN CLONE THE CHILDREN\n\n    if (canStart && width > 0) {\n      cloneChildren(row);\n      row.style.transitionDuration = `${transition}s`;\n      row.style.transform = `translateX(-${width}px)`;\n    } //COMPONENTWILLUNMOUNT\n\n\n    return () => {\n      if (canStart) {\n        localStorage.setItem('shouldBeCloned', 'false'); // console.log('Rows have unmounted')\n\n        row.style.transitionDuration = `0s`;\n        row.style.transform = `translateX(0px)`;\n      } else {\n        return null;\n      }\n    };\n  }, [canStart, transition, width]);\n\n  const loopTheGallery = e => {\n    //DETECTING IF TRANSITIONEND FIRES ON ROW ELEMENT ONLY\n    if (e.target === galleryRow.current) {\n      //RESETS CSS\n      galleryRow.current.style.transitionDuration = `0s`;\n      galleryRow.current.style.transform = `translateX(0px)`; //RE-INITIALIZING IT\n\n      setTimeout(() => {\n        galleryRow.current.style.transitionDuration = `${transition}s`;\n        galleryRow.current.style.transform = `translateX(-${width}px)`;\n      }, 1);\n    }\n  };\n\n  return __jsx(\"div\", {\n    className: \"looping_gallery_row\",\n    onTransitionEnd: loopTheGallery,\n    ref: galleryRow\n  }, props.data.map((item, key) => __jsx(LoopingItem, {\n    order: key + 1,\n    rowNumber: props.rowNumber,\n    id: item.bild.id,\n    windowWidth: props.windowWidth,\n    windowHeight: props.windowHeight,\n    measure: measure,\n    key: item.bild.id,\n    width: item.bild.sizes[\"medium_large-width\"],\n    height: item.bild.sizes[\"medium_large-height\"],\n    type: item.info.veranstaltungsart,\n    alt: item.info.titel,\n    highResUrl: item.bild.sizes.medium\n  })));\n};\n\nexport default LoopingRow;","map":{"version":3,"sources":["/Users/fatih/repos/goldendoor-next/components/loopingGallery/LoopingRow.js"],"names":["LoopingItem","openCarousel","e","imgID","currentTarget","classList","mainContainer","parentElement","lastElementChild","add","setTimeout","elementInCarousel","getElementsByClassName","elementInCarouselIndex","getAttribute","children","click","cloneChildren","el","items","childNodes","forEach","item","clone","cloneNode","addEventListener","appendChild","LoopingRow","props","width","setWidth","React","useState","canStart","setCanStart","transition","measure","useCallback","n","c","Math","round","galleryRow","useRef","useEffect","row","current","style","transitionDuration","transform","localStorage","setItem","loopTheGallery","target","data","map","key","rowNumber","bild","id","windowWidth","windowHeight","sizes","info","veranstaltungsart","titel","medium"],"mappings":"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","sourcesContent":["import LoopingItem from './LoopingItem';\n\nconst openCarousel = (e) => {\n\tconst imgID = e.currentTarget.classList[1];\n\tconst mainContainer = e.currentTarget.parentElement.parentElement.parentElement;\n\tmainContainer.lastElementChild.classList.add('show')\n\tsetTimeout(() => {\n\t\tmainContainer.lastElementChild.classList.add('gallerySliderOpen')\n\t\tsetTimeout(() => {\n\t\t\tmainContainer.lastElementChild.lastElementChild.classList.add('gallerySliderBlockOpen')\n\t\t}, 750);\n\t}, 10);\n\tconst elementInCarousel = mainContainer.lastElementChild.getElementsByClassName(`img-${imgID}`);\n\tconst elementInCarouselIndex = elementInCarousel[0].getAttribute('slideindex');\n\tmainContainer.lastElementChild.lastElementChild.lastElementChild.lastElementChild.children[elementInCarouselIndex].click();\n}\n\n//FUNCTION FOR CLONING THE CHILDREN OF A DOM NODE.\nconst cloneChildren = (el) => {\n\tlet items = Array.from(el.childNodes);\n\titems.forEach(function (item) {\n\t\tvar clone = item.cloneNode(true);\n\t\tclone.addEventListener('click', openCarousel)\n\t\tel.appendChild(clone);\n\t})\n};\n\nconst LoopingRow = (props) => {\n\n\t//INITIAL DOM WITH IS 0 BECAUSE IMAGES WILL CHANGE SIZE DEPENDING ON SCREEN SIZE\n\tconst [width, setWidth] = React.useState(0);\n\tconst [canStart, setCanStart] = React.useState(false);\n\tconst [transition] = React.useState(150);\n\n\t//AS A CALLBACK FUNCTION LOADED ITEM SENDS ITS WIDTH TO ROW ELEMENTS' STATE\n\t//AND WITH THE HELP OF REACT.MEMO zROW ELEMENT DOESN'T RE-RENDER\n\tconst measure = React.useCallback((n) => {\n\t\tsetWidth(c => Math.round((c + n) * 100) / 100)\n\t\tsetCanStart(true)\n\t}, [setWidth]);\n\n\tconst galleryRow = React.useRef();\n\n\t//THIS CUSTOM HOOK IS FOR TESTING RENDERING COUNT\n\t// useCountRenders();\n\n\t// React.useEffect(() => {\n\t// \tconsole.log(galleryRow.current.parentElement.querySelectorAll('.looping_gallery_item'))\n\t// }, [])\n\n\tReact.useEffect(() => {\n\n\t\t//COMPONENTDIDMOUNT\n\t\tlet row = galleryRow.current;\n\t\t// console.log(`Rows have mounted.`)\n\n\t\t//IF ROW IS ABLE START TO ANIMATE AND ITS' WIDTH IS CALCULATED,\n\t\t//THEN CLONE THE CHILDREN\n\t\t\n\t\tif (canStart && width > 0) {\n\t\t\tcloneChildren(row)\n\t\t\trow.style.transitionDuration = `${transition}s`;\n\t\t\trow.style.transform = `translateX(-${width}px)`;\n\t\t}\n\n\t\t//COMPONENTWILLUNMOUNT\n\t\treturn () => {\n\n\t\t\tif (canStart) {\n\t\t\t\tlocalStorage.setItem('shouldBeCloned', 'false')\n\t\t\t\t// console.log('Rows have unmounted')\n\t\t\t\trow.style.transitionDuration = `0s`;\n\t\t\t\trow.style.transform = `translateX(0px)`;\n\n\t\t\t} else {\n\t\t\t\treturn null\n\t\t\t}\n\n\t\t}\n\t}, [canStart, transition, width])\n\n\tconst loopTheGallery = (e) => {\n\n\t\t//DETECTING IF TRANSITIONEND FIRES ON ROW ELEMENT ONLY\n\t\tif (e.target === galleryRow.current) {\n\n\t\t\t//RESETS CSS\n\t\t\tgalleryRow.current.style.transitionDuration = `0s`;\n\t\t\tgalleryRow.current.style.transform = `translateX(0px)`;\n\n\t\t\t//RE-INITIALIZING IT\n\t\t\tsetTimeout(() => {\n\t\t\t\tgalleryRow.current.style.transitionDuration = `${transition}s`;\n\t\t\t\tgalleryRow.current.style.transform = `translateX(-${width}px)`;\n\t\t\t}, 1);\n\n\t\t}\n\t}\n\n\treturn (\n\n\t\t<div\n\t\t\tclassName=\"looping_gallery_row\"\n\t\t\tonTransitionEnd={loopTheGallery}\n\t\t\tref={galleryRow}>\n\n\t\t\t{props.data.map((item, key) => (  \n\n\t\t\t\t<LoopingItem\n\t\t\t\t\torder={key + 1}\n\t\t\t\t\trowNumber={props.rowNumber}\n\t\t\t\t\tid={item.bild.id}\n\t\t\t\t\twindowWidth={props.windowWidth}\n\t\t\t\t\twindowHeight={props.windowHeight}\n\t\t\t\t\tmeasure={measure}\n\t\t\t\t\tkey={item.bild.id}\n\t\t\t\t\twidth={item.bild.sizes[\"medium_large-width\"]}\n\t\t\t\t\theight={item.bild.sizes[\"medium_large-height\"]}\n\t\t\t\t\ttype={item.info.veranstaltungsart}\n\t\t\t\t\talt={item.info.titel}\n\t\t\t\t\thighResUrl={item.bild.sizes.medium}\n\t\t\t\t/>\n\n\t\t\t))}\n\n\t\t</div>\n\n\t)\n}\n\nexport default LoopingRow;\n"]},"metadata":{},"sourceType":"module"}