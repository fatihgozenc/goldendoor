{"ast":null,"code":"var _Promise = require(\"@babel/runtime-corejs2/core-js/promise\");\n\nconst nodemailer = require('nodemailer');\n\nconst fs = require('fs');\n\nconst transporter = nodemailer.createTransport({\n  pool: true,\n  host: \"smtprelaypool.ispgateway.de\",\n  port: 465,\n  secure: true,\n  // use TLS\n  auth: {\n    user: 'f.gozenc@narciss-taurus.de',\n    pass: '1rk3n84L>h8c'\n  }\n});\nconst files = get(req, \"body.data.files\");\nconst attachments = files.map(file => {\n  return {\n    filename: file.name,\n    path: file.url\n  };\n});\n\nconst send = req => {\n  console.log(req);\n  const message = {\n    from: 'f.gozenc@narciss-taurus.de',\n    to: 'f.gozenc@narciss-taurus.de',\n    subject: `Neu Nachricht von `,\n    text: req.body,\n    attachments: attachments,\n    replyTo: 'f.gozenc@narciss-taurus.de'\n  };\n  return new _Promise((resolve, reject) => {\n    transporter.sendMail(message, (error, info) => error ? reject(error) : resolve(info));\n  });\n};\n\nmodule.exports = send;","map":{"version":3,"sources":["/Users/fatih/repos/goldendoor-next/jobMailer.js"],"names":["nodemailer","require","fs","transporter","createTransport","pool","host","port","secure","auth","user","pass","files","get","req","attachments","map","file","filename","name","path","url","send","console","log","message","from","to","subject","text","body","replyTo","resolve","reject","sendMail","error","info","module","exports"],"mappings":";;AAAA,MAAMA,UAAU,GAAGC,OAAO,CAAC,YAAD,CAA1B;;AACA,MAAMC,EAAE,GAAGD,OAAO,CAAC,IAAD,CAAlB;;AAGA,MAAME,WAAW,GAAGH,UAAU,CAACI,eAAX,CAA2B;AAC9CC,EAAAA,IAAI,EAAE,IADwC;AAE9CC,EAAAA,IAAI,EAAE,6BAFwC;AAG9CC,EAAAA,IAAI,EAAE,GAHwC;AAI9CC,EAAAA,MAAM,EAAE,IAJsC;AAIhC;AACdC,EAAAA,IAAI,EAAE;AACLC,IAAAA,IAAI,EAAE,4BADD;AAELC,IAAAA,IAAI,EAAE;AAFD;AALwC,CAA3B,CAApB;AAWA,MAAMC,KAAK,GAAGC,GAAG,CAACC,GAAD,EAAM,iBAAN,CAAjB;AAEA,MAAMC,WAAW,GAAGH,KAAK,CAACI,GAAN,CAAWC,IAAD,IAAU;AACvC,SAAO;AAAEC,IAAAA,QAAQ,EAAED,IAAI,CAACE,IAAjB;AAAuBC,IAAAA,IAAI,EAAEH,IAAI,CAACI;AAAlC,GAAP;AACA,CAFmB,CAApB;;AAIA,MAAMC,IAAI,GAAIR,GAAD,IAAS;AACrBS,EAAAA,OAAO,CAACC,GAAR,CAAYV,GAAZ;AACA,QAAMW,OAAO,GAAG;AACfC,IAAAA,IAAI,EAAE,4BADS;AAEfC,IAAAA,EAAE,EAAE,4BAFW;AAGfC,IAAAA,OAAO,EAAG,oBAHK;AAIfC,IAAAA,IAAI,EAAEf,GAAG,CAACgB,IAJK;AAKff,IAAAA,WAAW,EAAEA,WALE;AAMfgB,IAAAA,OAAO,EAAE;AANM,GAAhB;AASA,SAAO,aAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;AACvC9B,IAAAA,WAAW,CAAC+B,QAAZ,CAAqBT,OAArB,EAA8B,CAACU,KAAD,EAAQC,IAAR,KAC7BD,KAAK,GAAGF,MAAM,CAACE,KAAD,CAAT,GAAmBH,OAAO,CAACI,IAAD,CADhC;AAGA,GAJM,CAAP;AAKA,CAhBD;;AAkBAC,MAAM,CAACC,OAAP,GAAiBhB,IAAjB","sourcesContent":["const nodemailer = require('nodemailer')\nconst fs = require('fs');\n\n\nconst transporter = nodemailer.createTransport({\n\tpool: true,\n\thost: \"smtprelaypool.ispgateway.de\",\n\tport: 465,\n\tsecure: true, // use TLS\n\tauth: {\n\t\tuser: 'f.gozenc@narciss-taurus.de',\n\t\tpass: '1rk3n84L>h8c'\n\t}\n});\n\nconst files = get(req, \"body.data.files\");\n\nconst attachments = files.map((file) => {\n\treturn { filename: file.name, path: file.url };\n});\n\nconst send = (req) => {\n\tconsole.log(req)\n\tconst message = {\n\t\tfrom: 'f.gozenc@narciss-taurus.de',\n\t\tto: 'f.gozenc@narciss-taurus.de',\n\t\tsubject: `Neu Nachricht von `,\n\t\ttext: req.body,\n\t\tattachments: attachments,\n\t\treplyTo: 'f.gozenc@narciss-taurus.de'\n\t}\n\n\treturn new Promise((resolve, reject) => {\n\t\ttransporter.sendMail(message, (error, info) =>\n\t\t\terror ? reject(error) : resolve(info)\n\t\t)\n\t})\n}\n\nmodule.exports = send"]},"metadata":{},"sourceType":"script"}