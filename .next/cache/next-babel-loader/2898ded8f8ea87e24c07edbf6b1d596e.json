{"ast":null,"code":"import _slicedToArray from \"@babel/runtime-corejs2/helpers/esm/slicedToArray\";\nimport _Array$from from \"@babel/runtime-corejs2/core-js/array/from\";\nvar _jsxFileName = \"/Users/macbook/repos/goldendoor-next/components/loopingGallery/LoopingRow.js\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport LoopingItem from './LoopingItem';\n\nvar openCarousel = function openCarousel(e) {\n  var imgID = e.currentTarget.classList[1];\n  var mainContainer = e.currentTarget.parentElement.parentElement.parentElement;\n  mainContainer.lastElementChild.classList.add('show');\n  setTimeout(function () {\n    mainContainer.lastElementChild.classList.add('gallerySliderOpen');\n    setTimeout(function () {\n      mainContainer.lastElementChild.lastElementChild.classList.add('gallerySliderBlockOpen');\n    }, 750);\n  }, 10);\n  var elementInCarousel = mainContainer.lastElementChild.getElementsByClassName(\"img-\".concat(imgID));\n  var elementInCarouselIndex = elementInCarousel[0].getAttribute('slideindex');\n  mainContainer.lastElementChild.lastElementChild.lastElementChild.lastElementChild.children[elementInCarouselIndex].click();\n}; //FUNCTION FOR CLONING THE CHILDREN OF A DOM NODE.\n\n\nvar cloneChildren = function cloneChildren(el) {\n  var items = _Array$from(el.childNodes);\n\n  items.forEach(function (item) {\n    var clone = item.cloneNode(true);\n    clone.addEventListener('click', openCarousel);\n    el.appendChild(clone);\n  });\n};\n\nvar LoopingRow = function LoopingRow(props) {\n  //INITIAL DOM WITH IS 0 BECAUSE IMAGES WILL CHANGE SIZE DEPENDING ON SCREEN SIZE\n  var _React$useState = React.useState(0),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      width = _React$useState2[0],\n      setWidth = _React$useState2[1];\n\n  var _React$useState3 = React.useState(false),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      canStart = _React$useState4[0],\n      setCanStart = _React$useState4[1];\n\n  var _React$useState5 = React.useState(150),\n      _React$useState6 = _slicedToArray(_React$useState5, 1),\n      transition = _React$useState6[0]; //AS A CALLBACK FUNCTION LOADED ITEM SENDS ITS WIDTH TO ROW ELEMENTS' STATE\n  //AND WITH THE HELP OF REACT.MEMO zROW ELEMENT DOESN'T RE-RENDER\n\n\n  var measure = React.useCallback(function (n) {\n    setWidth(function (c) {\n      return Math.round((c + n) * 100) / 100;\n    });\n    setCanStart(true);\n  }, [setWidth]);\n  var galleryRow = React.useRef(); //THIS CUSTOM HOOK IS FOR TESTING RENDERING COUNT\n  // useCountRenders();\n  // React.useEffect(() => {\n  // \tconsole.log(galleryRow.current.parentElement.querySelectorAll('.looping_gallery_item'))\n  // }, [])\n\n  React.useEffect(function () {\n    //COMPONENTDIDMOUNT\n    var row = galleryRow.current; // console.log(`Rows have mounted.`)\n    //IF ROW IS ABLE START TO ANIMATE AND ITS' WIDTH IS CALCULATED,\n    //THEN CLONE THE CHILDREN\n\n    if (canStart && width > 0) {\n      cloneChildren(row);\n      row.style.transitionDuration = \"\".concat(transition, \"s\");\n      row.style.transform = \"translateX(-\".concat(width, \"px)\");\n    } //COMPONENTWILLUNMOUNT\n\n\n    return function () {\n      if (canStart) {\n        localStorage.setItem('shouldBeCloned', 'false'); // console.log('Rows have unmounted')\n\n        row.style.transitionDuration = \"0s\";\n        row.style.transform = \"translateX(0px)\";\n      } else {\n        return null;\n      }\n    };\n  }, [canStart, transition, width]);\n\n  var loopTheGallery = function loopTheGallery(e) {\n    //DETECTING IF TRANSITIONEND FIRES ON ROW ELEMENT ONLY\n    if (e.target === galleryRow.current) {\n      //RESETS CSS\n      galleryRow.current.style.transitionDuration = \"0s\";\n      galleryRow.current.style.transform = \"translateX(0px)\"; //RE-INITIALIZING IT\n\n      setTimeout(function () {\n        galleryRow.current.style.transitionDuration = \"\".concat(transition, \"s\");\n        galleryRow.current.style.transform = \"translateX(-\".concat(width, \"px)\");\n      }, 1);\n    }\n  };\n\n  return __jsx(\"div\", {\n    className: \"looping_gallery_row\",\n    onTransitionEnd: loopTheGallery,\n    ref: galleryRow,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102\n    },\n    __self: this\n  }, props.data.map(function (item, key) {\n    return __jsx(LoopingItem, {\n      order: key + 1,\n      rowNumber: props.rowNumber,\n      id: item.bild.id,\n      windowWidth: props.windowWidth,\n      windowHeight: props.windowHeight,\n      measure: measure,\n      key: item.bild.id,\n      width: item.bild.sizes[\"medium_large-width\"],\n      height: item.bild.sizes[\"medium_large-height\"],\n      type: item.info.veranstaltungsart,\n      alt: item.info.titel,\n      highResUrl: item.bild.sizes.medium,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    });\n  }));\n};\n\nexport default LoopingRow;","map":{"version":3,"sources":["/Users/macbook/repos/goldendoor-next/components/loopingGallery/LoopingRow.js"],"names":["LoopingItem","openCarousel","e","imgID","currentTarget","classList","mainContainer","parentElement","lastElementChild","add","setTimeout","elementInCarousel","getElementsByClassName","elementInCarouselIndex","getAttribute","children","click","cloneChildren","el","items","childNodes","forEach","item","clone","cloneNode","addEventListener","appendChild","LoopingRow","props","React","useState","width","setWidth","canStart","setCanStart","transition","measure","useCallback","n","c","Math","round","galleryRow","useRef","useEffect","row","current","style","transitionDuration","transform","localStorage","setItem","loopTheGallery","target","data","map","key","rowNumber","bild","id","windowWidth","windowHeight","sizes","info","veranstaltungsart","titel","medium"],"mappings":"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","sourcesContent":["import LoopingItem from './LoopingItem';\n\nconst openCarousel = (e) => {\n\tconst imgID = e.currentTarget.classList[1];\n\tconst mainContainer = e.currentTarget.parentElement.parentElement.parentElement;\n\tmainContainer.lastElementChild.classList.add('show')\n\tsetTimeout(() => {\n\t\tmainContainer.lastElementChild.classList.add('gallerySliderOpen')\n\t\tsetTimeout(() => {\n\t\t\tmainContainer.lastElementChild.lastElementChild.classList.add('gallerySliderBlockOpen')\n\t\t}, 750);\n\t}, 10);\n\tconst elementInCarousel = mainContainer.lastElementChild.getElementsByClassName(`img-${imgID}`);\n\tconst elementInCarouselIndex = elementInCarousel[0].getAttribute('slideindex');\n\tmainContainer.lastElementChild.lastElementChild.lastElementChild.lastElementChild.children[elementInCarouselIndex].click();\n}\n\n//FUNCTION FOR CLONING THE CHILDREN OF A DOM NODE.\nconst cloneChildren = (el) => {\n\tlet items = Array.from(el.childNodes);\n\titems.forEach(function (item) {\n\t\tvar clone = item.cloneNode(true);\n\t\tclone.addEventListener('click', openCarousel)\n\t\tel.appendChild(clone);\n\t})\n};\n\nconst LoopingRow = (props) => {\n\n\t//INITIAL DOM WITH IS 0 BECAUSE IMAGES WILL CHANGE SIZE DEPENDING ON SCREEN SIZE\n\tconst [width, setWidth] = React.useState(0);\n\tconst [canStart, setCanStart] = React.useState(false);\n\tconst [transition] = React.useState(150);\n\n\t//AS A CALLBACK FUNCTION LOADED ITEM SENDS ITS WIDTH TO ROW ELEMENTS' STATE\n\t//AND WITH THE HELP OF REACT.MEMO zROW ELEMENT DOESN'T RE-RENDER\n\tconst measure = React.useCallback((n) => {\n\t\tsetWidth(c => Math.round((c + n) * 100) / 100)\n\t\tsetCanStart(true)\n\t}, [setWidth]);\n\n\tconst galleryRow = React.useRef();\n\n\t//THIS CUSTOM HOOK IS FOR TESTING RENDERING COUNT\n\t// useCountRenders();\n\n\t// React.useEffect(() => {\n\t// \tconsole.log(galleryRow.current.parentElement.querySelectorAll('.looping_gallery_item'))\n\t// }, [])\n\n\tReact.useEffect(() => {\n\n\t\t//COMPONENTDIDMOUNT\n\t\tlet row = galleryRow.current;\n\t\t// console.log(`Rows have mounted.`)\n\n\t\t//IF ROW IS ABLE START TO ANIMATE AND ITS' WIDTH IS CALCULATED,\n\t\t//THEN CLONE THE CHILDREN\n\t\t\n\t\tif (canStart && width > 0) {\n\t\t\tcloneChildren(row)\n\t\t\trow.style.transitionDuration = `${transition}s`;\n\t\t\trow.style.transform = `translateX(-${width}px)`;\n\t\t}\n\n\t\t//COMPONENTWILLUNMOUNT\n\t\treturn () => {\n\n\t\t\tif (canStart) {\n\t\t\t\tlocalStorage.setItem('shouldBeCloned', 'false')\n\t\t\t\t// console.log('Rows have unmounted')\n\t\t\t\trow.style.transitionDuration = `0s`;\n\t\t\t\trow.style.transform = `translateX(0px)`;\n\n\t\t\t} else {\n\t\t\t\treturn null\n\t\t\t}\n\n\t\t}\n\t}, [canStart, transition, width])\n\n\tconst loopTheGallery = (e) => {\n\n\t\t//DETECTING IF TRANSITIONEND FIRES ON ROW ELEMENT ONLY\n\t\tif (e.target === galleryRow.current) {\n\n\t\t\t//RESETS CSS\n\t\t\tgalleryRow.current.style.transitionDuration = `0s`;\n\t\t\tgalleryRow.current.style.transform = `translateX(0px)`;\n\n\t\t\t//RE-INITIALIZING IT\n\t\t\tsetTimeout(() => {\n\t\t\t\tgalleryRow.current.style.transitionDuration = `${transition}s`;\n\t\t\t\tgalleryRow.current.style.transform = `translateX(-${width}px)`;\n\t\t\t}, 1);\n\n\t\t}\n\t}\n\n\treturn (\n\n\t\t<div\n\t\t\tclassName=\"looping_gallery_row\"\n\t\t\tonTransitionEnd={loopTheGallery}\n\t\t\tref={galleryRow}>\n\n\t\t\t{props.data.map((item, key) => (  \n\n\t\t\t\t<LoopingItem\n\t\t\t\t\torder={key + 1}\n\t\t\t\t\trowNumber={props.rowNumber}\n\t\t\t\t\tid={item.bild.id}\n\t\t\t\t\twindowWidth={props.windowWidth}\n\t\t\t\t\twindowHeight={props.windowHeight}\n\t\t\t\t\tmeasure={measure}\n\t\t\t\t\tkey={item.bild.id}\n\t\t\t\t\twidth={item.bild.sizes[\"medium_large-width\"]}\n\t\t\t\t\theight={item.bild.sizes[\"medium_large-height\"]}\n\t\t\t\t\ttype={item.info.veranstaltungsart}\n\t\t\t\t\talt={item.info.titel}\n\t\t\t\t\thighResUrl={item.bild.sizes.medium}\n\t\t\t\t/>\n\n\t\t\t))}\n\n\t\t</div>\n\n\t)\n}\n\nexport default LoopingRow;\n"]},"metadata":{},"sourceType":"module"}