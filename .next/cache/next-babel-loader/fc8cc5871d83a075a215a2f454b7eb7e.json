{"ast":null,"code":"var _Promise = require(\"@babel/runtime-corejs2/core-js/promise\");\n\nconst nodemailer = require('nodemailer');\n\nconst fs = require('fs');\n\nconst transporter = nodemailer.createTransport({\n  pool: true,\n  host: \"smtprelaypool.ispgateway.de\",\n  port: 465,\n  secure: true,\n  // use TLS\n  auth: {\n    user: 'f.gozenc@narciss-taurus.de',\n    pass: '1rk3n84L>h8c'\n  }\n});\n\nconst send = props => {\n  const reCodedFile = new TextEncoder(\"utf-8\").encode(props.attachment_buffer);\n  console.log(fs.readFile(reCodedFile, function (err, data) {\n    if (err) throw err;\n  }));\n  console.log(new TextEncoder(\"utf-8\").encode(props.attachment_buffer));\n  const name = props.contactType == 'contactForm' ? props.kontakt_name + \" \" + props.kontakt_surname : props.name + ' ' + props.surname;\n  const email = props.contactType == 'contactForm' ? props.kontakt_email : props.email;\n\n  const text = () => {\n    if (props.contactType == 'contactForm') {\n      return `\n\t\t\t\t\\r\\nKontaktdaten\\r\\n\n\t\t\t\tAnrede: ${props.kontakt_anrede}\\r\\n\n\t\t\t\tVorname: ${props.kontakt_name}\\r\\n\n\t\t\t\tNachname: ${props.kontakt_surname}\\r\\n\n\t\t\t\tE-Mail: ${props.kontakt_email}\\r\\n\n\t\t\t\tTelefon: ${props.kontakt_phone}\\r\\n\n\t\t\t\tFirma: ${props.kontakt_company}\\r\\n\n\t\t\t\tNachricht: ${props.event_nachricht}\\r\\n\n\t\t\t\t\\r\\nEventinformationen\\r\\n\n\t\t\t\tArt der Veranstaltung: ${props.event_type}\\r\\n\n\t\t\t\tLocation Auswahl: ${props.event_location}\\r\\n\n\t\t\t\tKonkretes Datum?: ${props.event_date_answer}\\r\\n\n\t\t\t\tZeitraum (Wenn es kein konkretes Datum gibt): ${props.date_range}\\r\\n\n\t\t\t\tEvent Datum (Wenn es ein konkretes Datum gibt): ${props.eventdatum}\\r\\n\n\t\t\t\tEvent Ausweichtermin (Wenn es ein konkretes Datum gibt): ${props.ausweichtermin}\\r\\n\n\t\t\t\tEvent Beginn Zeit (Wenn es ein konkretes Datum gibt): ${props.eventzeitbeginn}\\r\\n\n\t\t\t\tEvent Ende Zeit (Wenn es ein konkretes Datum gibt): ${props.eventzeitend}\\r\\n\n\t\t\t\t\\r\\nZusatzinformationen\\r\\n\n\t\t\t\tAnzahl der Personen: ${props.personenzahl}\\r\\n\n\t\t\t\tMaximal Budget?: ${props.event_max_budget}\\r\\n\n\t\t\t\t\\r\\nGewünschte dienstleistungen\\r\\n\n\t\t\t\tSpeisenauswahl: ${props.lang === 'de' ? props.event_speisen : props.event_food}\\r\\n\n\t\t\t\tMobiliarauswahl: ${props.lang === 'de' ? props.event_mobiliar : props.event_furnishings}\\r\\n\n\t\t\t\tTechnikauswahl: ${props.lang === 'de' ? props.event_technik : props.event_technique}\\r\\n\n\t\t\t\tDekoauswahl: ${props.lang === 'de' ? props.event_deko : props.event_decoration}\\r\\n\n\t\t\t\tMusikauswahl: ${props.lang === 'de' ? props.event_musik : props.event_music}\\r\\n\n\t\t\t`;\n    } else if (props.contactType == 'keyRequest') {\n      return `\n\t\t\t\t\\r\\nSchlüsselanfrage für Pressekit\\r\\n\\nVorname: ${props.name}\\r\\nNachname: ${props.surname}\\r\\nE-Mail: ${props.email}\\r\\n\n\t\t\t`;\n    } else {\n      return `\n\t\t\t\t\\r\\nKarriere Bewerbung\\r\\n\n\t\t\t\tVorname: ${props.name}\\r\\n\n\t\t\t\tNachname: ${props.surname}\\r\\n\n\t\t\t\tE-Mail: ${props.email}\\r\\n\n\t\t\t\tBerufliche Stellung: ${props.position}\\r\\n\n\t\t\t\tAktueller Jobsstatus: ${props.jobstatus}\\r\\n\n\t\t\t\tMögliches Start-Datum: ${props.startdate}\\r\\n\n\t\t\t\tNachricht: ${props.message}\\r\\n\n\t\t\t`;\n    }\n  };\n\n  const content = text();\n  const uploadedFile = props.contactType == 'contactForm' || props.contactType == 'keyRequest' ? null : [{\n    filename: props.attachment_name,\n    content: Buffer.from(new TextEncoder(\"utf-8\").encode(props.attachment_buffer))\n  }];\n  const sender = `${name} <${email}>`;\n  const message = {\n    from: 'f.gozenc@narciss-taurus.de',\n    to: 'f.gozenc@narciss-taurus.de',\n    subject: `Neu Nachricht von ${sender}`,\n    text: content,\n    attachments: uploadedFile,\n    replyTo: sender\n  };\n  return new _Promise((resolve, reject) => {\n    transporter.sendMail(message, (error, info) => error ? reject(error) : resolve(info));\n  });\n};\n\nmodule.exports = send;","map":{"version":3,"sources":["/Users/fatih/repos/goldendoor-next/kontaktMailer.js"],"names":["nodemailer","require","fs","transporter","createTransport","pool","host","port","secure","auth","user","pass","send","props","reCodedFile","TextEncoder","encode","attachment_buffer","console","log","readFile","err","data","name","contactType","kontakt_name","kontakt_surname","surname","email","kontakt_email","text","kontakt_anrede","kontakt_phone","kontakt_company","event_nachricht","event_type","event_location","event_date_answer","date_range","eventdatum","ausweichtermin","eventzeitbeginn","eventzeitend","personenzahl","event_max_budget","lang","event_speisen","event_food","event_mobiliar","event_furnishings","event_technik","event_technique","event_deko","event_decoration","event_musik","event_music","position","jobstatus","startdate","message","content","uploadedFile","filename","attachment_name","Buffer","from","sender","to","subject","attachments","replyTo","resolve","reject","sendMail","error","info","module","exports"],"mappings":"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","sourcesContent":["const nodemailer = require('nodemailer')\nconst fs = require('fs');\nconst transporter = nodemailer.createTransport({\n\tpool: true,\n\thost: \"smtprelaypool.ispgateway.de\",\n\tport: 465,\n\tsecure: true, // use TLS\n\tauth: {\n\t\tuser: 'f.gozenc@narciss-taurus.de',\n\t\tpass: '1rk3n84L>h8c'\n\t}\n});\n\nconst send = (props) => {\n\tconst reCodedFile = new TextEncoder(\"utf-8\").encode(props.attachment_buffer);\n\tconsole.log(fs.readFile(reCodedFile, function (err, data) {\n\t\tif (err) throw err;\n\t}))\n\tconsole.log(new TextEncoder(\"utf-8\").encode(props.attachment_buffer))\n\tconst name = props.contactType == 'contactForm' ? (props.kontakt_name + \" \" + props.kontakt_surname) : props.name + ' ' + props.surname;\n\tconst email = props.contactType == 'contactForm' ? props.kontakt_email : props.email;\n\tconst text = () => {\n\t\tif (props.contactType == 'contactForm') {\n\t\t\treturn (`\n\t\t\t\t\\r\\nKontaktdaten\\r\\n\n\t\t\t\tAnrede: ${props.kontakt_anrede}\\r\\n\n\t\t\t\tVorname: ${props.kontakt_name}\\r\\n\n\t\t\t\tNachname: ${props.kontakt_surname}\\r\\n\n\t\t\t\tE-Mail: ${props.kontakt_email}\\r\\n\n\t\t\t\tTelefon: ${props.kontakt_phone}\\r\\n\n\t\t\t\tFirma: ${props.kontakt_company}\\r\\n\n\t\t\t\tNachricht: ${props.event_nachricht}\\r\\n\n\t\t\t\t\\r\\nEventinformationen\\r\\n\n\t\t\t\tArt der Veranstaltung: ${props.event_type}\\r\\n\n\t\t\t\tLocation Auswahl: ${props.event_location}\\r\\n\n\t\t\t\tKonkretes Datum?: ${props.event_date_answer}\\r\\n\n\t\t\t\tZeitraum (Wenn es kein konkretes Datum gibt): ${props.date_range}\\r\\n\n\t\t\t\tEvent Datum (Wenn es ein konkretes Datum gibt): ${props.eventdatum}\\r\\n\n\t\t\t\tEvent Ausweichtermin (Wenn es ein konkretes Datum gibt): ${props.ausweichtermin}\\r\\n\n\t\t\t\tEvent Beginn Zeit (Wenn es ein konkretes Datum gibt): ${props.eventzeitbeginn}\\r\\n\n\t\t\t\tEvent Ende Zeit (Wenn es ein konkretes Datum gibt): ${props.eventzeitend}\\r\\n\n\t\t\t\t\\r\\nZusatzinformationen\\r\\n\n\t\t\t\tAnzahl der Personen: ${props.personenzahl}\\r\\n\n\t\t\t\tMaximal Budget?: ${props.event_max_budget}\\r\\n\n\t\t\t\t\\r\\nGewünschte dienstleistungen\\r\\n\n\t\t\t\tSpeisenauswahl: ${props.lang === 'de' ? props.event_speisen : props.event_food}\\r\\n\n\t\t\t\tMobiliarauswahl: ${props.lang === 'de' ? props.event_mobiliar : props.event_furnishings}\\r\\n\n\t\t\t\tTechnikauswahl: ${props.lang === 'de' ? props.event_technik : props.event_technique}\\r\\n\n\t\t\t\tDekoauswahl: ${props.lang === 'de' ? props.event_deko : props.event_decoration}\\r\\n\n\t\t\t\tMusikauswahl: ${props.lang === 'de' ? props.event_musik : props.event_music}\\r\\n\n\t\t\t`)\n\t\t} else if (props.contactType == 'keyRequest') {\n\t\t\treturn (`\n\t\t\t\t\\r\\nSchlüsselanfrage für Pressekit\\r\\n\\nVorname: ${props.name}\\r\\nNachname: ${props.surname}\\r\\nE-Mail: ${props.email}\\r\\n\n\t\t\t`)\n\t\t} else {\n\t\t\treturn (`\n\t\t\t\t\\r\\nKarriere Bewerbung\\r\\n\n\t\t\t\tVorname: ${props.name}\\r\\n\n\t\t\t\tNachname: ${props.surname}\\r\\n\n\t\t\t\tE-Mail: ${props.email}\\r\\n\n\t\t\t\tBerufliche Stellung: ${props.position}\\r\\n\n\t\t\t\tAktueller Jobsstatus: ${props.jobstatus}\\r\\n\n\t\t\t\tMögliches Start-Datum: ${props.startdate}\\r\\n\n\t\t\t\tNachricht: ${props.message}\\r\\n\n\t\t\t`)\n\t\t}\n\t};\n\n\tconst content = text();\n\n\n\tconst uploadedFile =\n\t\tprops.contactType == 'contactForm' || props.contactType == 'keyRequest' ? null : [{\n\t\t\tfilename: props.attachment_name,\n\t\t\tcontent: Buffer.from(new TextEncoder(\"utf-8\").encode(props.attachment_buffer))\n\t\t}]\n\tconst sender = `${name} <${email}>`;\n\tconst message = {\n\t\tfrom: 'f.gozenc@narciss-taurus.de',\n\t\tto: 'f.gozenc@narciss-taurus.de',\n\t\tsubject: `Neu Nachricht von ${sender}`,\n\t\ttext: content,\n\t\tattachments: uploadedFile,\n\t\treplyTo: sender\n\t}\n\n\treturn new Promise((resolve, reject) => {\n\t\ttransporter.sendMail(message, (error, info) =>\n\t\t\terror ? reject(error) : resolve(info)\n\t\t)\n\t})\n}\n\nmodule.exports = send"]},"metadata":{},"sourceType":"script"}