{"ast":null,"code":"import _Object$defineProperty from \"@babel/runtime-corejs2/core-js/object/define-property\";\nimport _Object$defineProperties from \"@babel/runtime-corejs2/core-js/object/define-properties\";\nimport _Object$getOwnPropertyDescriptors from \"@babel/runtime-corejs2/core-js/object/get-own-property-descriptors\";\nimport _Object$getOwnPropertyDescriptor from \"@babel/runtime-corejs2/core-js/object/get-own-property-descriptor\";\nimport _Object$getOwnPropertySymbols from \"@babel/runtime-corejs2/core-js/object/get-own-property-symbols\";\nimport _Object$keys from \"@babel/runtime-corejs2/core-js/object/keys\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport React from \"react\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = _Object$keys(object); if (_Object$getOwnPropertySymbols) { var symbols = _Object$getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return _Object$getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (_Object$getOwnPropertyDescriptors) { _Object$defineProperties(target, _Object$getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { _Object$defineProperty(target, key, _Object$getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport Icon from '../Icon';\nimport parse from 'html-react-parser';\nimport Obfuscate from 'react-obfuscate';\nimport './style.scss';\nconst IMG_WIDTH = 300;\nconst IMG_HEIGHT = 300;\nconst parentPad = 0;\nconst VISIBLEIMAGES = 3;\nconst DURATION = 750;\nexport default function (props) {\n  const {\n    imgList = [],\n    img_width = IMG_WIDTH,\n    img_height = IMG_HEIGHT,\n    visibleImages = VISIBLEIMAGES,\n    duration = DURATION,\n    autoNext = false,\n    timeForNext = 3000\n  } = props;\n  const [currFirstImg, setCurrFirstImg] = React.useState(0);\n  const [actualFirst, setActualFirst] = React.useState('');\n  const [visibleItemsProps, setVisibleItemsProps] = React.useState({\n    order: [],\n    styles: {}\n  });\n  const currMiddleImgRef = React.useRef(0);\n  const intervalRef = React.useRef(0);\n  const imgDifference = React.useRef(1);\n  const durationRef = React.useRef(duration);\n  const wrapper = React.useRef();\n  const parentHeight = img_height + 2 * parentPad;\n  const parentWidth = img_width * 3;\n  const elementsInLeft = Math.ceil(visibleImages / 2);\n  const elementsInRight = visibleImages - elementsInLeft;\n\n  const changeCenter = ({\n    event,\n    index\n  }) => {\n    const currFirstImgIndex = visibleItemsProps.order.indexOf(currFirstImg);\n    const prevIndex = visibleItemsProps.order[currFirstImgIndex - 1];\n    const nextIndex = visibleItemsProps.order[currFirstImgIndex + 1];\n\n    if (index !== currFirstImg) {\n      if (index === prevIndex || index === nextIndex) {\n        setCurrFirstImg(index);\n      } else {\n        const val = currFirstImgIndex - visibleItemsProps.order.indexOf(index);\n        imgDifference.current = Math.abs(val);\n        setActualFirst(index);\n        cycleToNextImage(index);\n      }\n    } else {\n      null;\n    }\n  };\n\n  const cycleToNextImage = actual => {\n    if (visibleItemsProps.order.indexOf(currMiddleImgRef.current) > visibleItemsProps.order.indexOf(actual)) {\n      // Right side image click\n      currMiddleImgRef.current = currMiddleImgRef.current - 1 > -1 ? currMiddleImgRef.current - 1 : imgList.length - 1; // Right side image click\n\n      setCurrFirstImg(currMiddleImgRef.current);\n    } else {\n      // Left side image click\n      currMiddleImgRef.current = currMiddleImgRef.current + 1 < imgList.length ? currMiddleImgRef.current + 1 : 0; // Conditions to handle cycle\n\n      setCurrFirstImg(currMiddleImgRef.current);\n    }\n  };\n\n  const gapBetween = props.name === 'team' ? 4 : 4.4;\n\n  const constructVisibleItemsProps = () => {\n    const visibleItemsProps = {}; // To store config for items that are visibile in the carousel\n\n    visibleItemsProps.order = [];\n    let curr_center = currFirstImg; // Storing the Current Middle element in focus\n\n    let timesToIterate = 0; // To iterate through all visible number of images.\n\n    let zIndex = -elementsInRight; // We start from left to right and Zindex has to keep on increasing till middle then has to reduce.\n\n    let xTranslate = img_width; // To move the element with respect to x axis\n\n    let zTranslate = 0; // To reduce image size for images apart from center\n\n    let opacity = 1; // ARALIKLAR BURADA = 4\n\n    const division = img_width * (4.2 / elementsInLeft); // Specifies the length that next image has to move away from with respect to current image (1.6 times the current image)\n\n    let opacityDivider = 1 / elementsInRight; // minimum opacity should be 0.3 (1-0.7)\n\n    let rightEltCount = elementsInRight;\n    let leftEltCount = elementsInLeft; // including middle element\n\n    let curr_center_copy = curr_center;\n\n    while (timesToIterate < visibleImages) {\n      const styles = {};\n      let currImgIndex;\n      let currImgIndexOnRight = true; // Tells if in this iteration the currently iterated image lies left to the middle image or not\n      // To set properties for elements in right side\n\n      if (timesToIterate < elementsInRight) {\n        const nextIndex = curr_center - rightEltCount;\n        currImgIndex = nextIndex > -1 ? nextIndex : imgList.length - Math.abs(nextIndex); // Gives the rightmost elemnt in first iteration and then the subsequent elements down the iteration\n\n        opacity = 1 - opacityDivider * rightEltCount; // To assign lowest opacity to last element and increaing it till we come to middle\n\n        zTranslate = -division * rightEltCount; // To increase the size of the images subsequently from last to middle\n\n        xTranslate = img_width - division * rightEltCount; // X coordinate position\n\n        rightEltCount--;\n      } else {\n        // To set properties for elements in center and to left of it. All props behaves similar to right\n        currImgIndexOnRight = false;\n        currImgIndex = curr_center_copy;\n\n        if (curr_center_copy + 1 >= imgList.length) {\n          // to maintain cyclic carousel\n          curr_center_copy = 0;\n        } else {\n          curr_center_copy++;\n        }\n\n        opacity = 1 - opacityDivider * Math.abs(leftEltCount - (timesToIterate + 1));\n        zTranslate = -division * Math.abs(leftEltCount - (timesToIterate + 1));\n        xTranslate = img_width + division * Math.abs(leftEltCount - (timesToIterate + 1));\n      } // Assigning above calculated values to 'styles' object\n\n\n      styles.transform = 'translateX(' + xTranslate + 'px) translateZ(' + zTranslate + 'px)';\n      styles.opacity = opacity;\n      styles.zIndex = currImgIndexOnRight ? zIndex++ : zIndex--; // To reduce zIndex while going through left elements\n\n      visibleItemsProps.order.push(currImgIndex); // Push the current image number in the orders array\n\n      visibleItemsProps[currImgIndex] = {\n        styles\n      }; // pushing all previously created styles\n\n      timesToIterate++;\n    }\n\n    durationRef.current = actualFirst === '' ? duration : duration / imgDifference.current; // duration will be user given if he clicks next image or\n    // we divide the duration by number of images skipped\n\n    setVisibleItemsProps(visibleItemsProps); // setting state for visible items\n  };\n\n  React.useEffect(() => {\n    clearInterval(intervalRef.current);\n\n    if (actualFirst !== '') {\n      intervalRef.current = setInterval(() => {\n        if (actualFirst !== '' && actualFirst !== currMiddleImgRef.current) {\n          // If the currentimage in middle is not actually clicked image then gotoNext image\n          cycleToNextImage(actualFirst);\n        } else if (actualFirst !== '' && actualFirst === currMiddleImgRef.current) {\n          setActualFirst('');\n          imgDifference.current = 1;\n          clearInterval(intervalRef.current); // If actual clicked and middle image are same we are all set to clear intervals, as they are unnecessary now\n        }\n      }, durationRef.current - 100); // Introduced an advance of 100ms to begin bringing nextimage\n      // to middle before the previous one settles down else it looks jerky\n    }\n  }, [actualFirst]);\n  React.useEffect(() => {\n    constructVisibleItemsProps(); // This constructs all css properties to the elements in visibility\n\n    currMiddleImgRef.current = currFirstImg; // Need to set it here as well so while accessing inside interval it will have the latest value\n  }, [currFirstImg]);\n  React.useEffect(() => {\n    if (autoNext) {\n      setInterval(() => {\n        const nextImg = currMiddleImgRef.current + 1 < imgList.length ? currMiddleImgRef.current + 1 : 0;\n        setCurrFirstImg(nextImg);\n      }, timeForNext);\n    }\n  }, []);\n  const [middleImageKey, setMiddleImageKey] = React.useState(0);\n\n  const loadCarousel = () => {\n    return __jsx(\"div\", {\n      className: `carousel__3D carousel__3D--${props.name}`\n    }, __jsx(\"ul\", {\n      ref: wrapper,\n      className: \"carousel__wrapper\",\n      style: {\n        height: parentHeight + 'px',\n        width: parentWidth + 'px',\n        padding: parentPad + 'px',\n        perspective: '500px'\n      }\n    }, imgList.map((image, index) => {\n      const displayNone = visibleItemsProps.order.indexOf(index) === -1; // To not to show images that are out of visibility scope\n\n      const styles = visibleItemsProps[index] ? visibleItemsProps[index].styles : {};\n      return __jsx(\"li\", {\n        key: index,\n        className: 'carousel__item ' + (displayNone ? 'd-none' : ''),\n        style: _objectSpread({}, styles, {\n          position: 'absolute',\n          transition: `all ${durationRef.current}ms ease `\n        }),\n        onClick: e => {\n          changeCenter({\n            e,\n            index\n          });\n          setMiddleImageKey(index);\n        }\n      }, __jsx(\"img\", {\n        src: image,\n        alt: 'img',\n        width: img_width,\n        height: img_height\n      }));\n    })), __jsx(\"div\", {\n      className: `carousel__infos carousel__infos--${props.name}`\n    }, props.name === \"team\" ? props.data.map((item, key) => key === middleImageKey && __jsx(\"div\", {\n      key: key,\n      className: \"infos__item\"\n    }, __jsx(\"h3\", null, item.mitarbeiter_name), __jsx(\"h4\", null, item.mitarbeiter_titel), __jsx(Obfuscate, {\n      email: item.mitarbeiter_email\n    }), __jsx(Obfuscate, {\n      tel: item.mitarbeiter_telefon\n    }))) : props.data.map((item, key) => key === middleImageKey && __jsx(\"div\", {\n      key: key,\n      className: \"infos__item infos__item--downloads\"\n    }, __jsx(\"h4\", null, item.name), __jsx(\"a\", {\n      href: item.link,\n      target: \"_blank\",\n      className: \"singleloc__button\"\n    }, __jsx(Icon, {\n      type: \"factsheet\",\n      name: \"DOWNLOAD\"\n    }))))), props.name === \"downloads\" && __jsx(\"div\", {\n      className: \"download__section--factsheet\"\n    }, __jsx(\"h2\", null, \"Factsheets\"), parse(props.content.Inhalt)));\n  };\n\n  return __jsx(React.Fragment, null, loadCarousel());\n}","map":{"version":3,"sources":["/Users/fatih/repos/goldendoor-next/components/carousel/index.js"],"names":["Icon","parse","Obfuscate","IMG_WIDTH","IMG_HEIGHT","parentPad","VISIBLEIMAGES","DURATION","props","imgList","img_width","img_height","visibleImages","duration","autoNext","timeForNext","currFirstImg","setCurrFirstImg","React","useState","actualFirst","setActualFirst","visibleItemsProps","setVisibleItemsProps","order","styles","currMiddleImgRef","useRef","intervalRef","imgDifference","durationRef","wrapper","parentHeight","parentWidth","elementsInLeft","Math","ceil","elementsInRight","changeCenter","event","index","currFirstImgIndex","indexOf","prevIndex","nextIndex","val","current","abs","cycleToNextImage","actual","length","gapBetween","name","constructVisibleItemsProps","curr_center","timesToIterate","zIndex","xTranslate","zTranslate","opacity","division","opacityDivider","rightEltCount","leftEltCount","curr_center_copy","currImgIndex","currImgIndexOnRight","transform","push","useEffect","clearInterval","setInterval","nextImg","middleImageKey","setMiddleImageKey","loadCarousel","height","width","padding","perspective","map","image","displayNone","position","transition","e","data","item","key","mitarbeiter_name","mitarbeiter_titel","mitarbeiter_email","mitarbeiter_telefon","link","content","Inhalt"],"mappings":"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","sourcesContent":["import Icon from '../Icon';\nimport parse from 'html-react-parser';\nimport Obfuscate from 'react-obfuscate';\nimport './style.scss';\n\nconst IMG_WIDTH = 300;\nconst IMG_HEIGHT = 300;\nconst parentPad = 0;\nconst VISIBLEIMAGES = 3;\nconst DURATION = 750;\n\nexport default function (props) {\n\tconst {\n\t\timgList = [],\n\t\timg_width = IMG_WIDTH,\n\t\timg_height = IMG_HEIGHT,\n\t\tvisibleImages = VISIBLEIMAGES,\n\t\tduration = DURATION,\n\t\tautoNext = false,\n\t\ttimeForNext = 3000\n\t} = props;\n\n\tconst [currFirstImg, setCurrFirstImg] = React.useState(0);\n\tconst [actualFirst, setActualFirst] = React.useState('');\n\tconst [visibleItemsProps, setVisibleItemsProps] = React.useState({ order: [], styles: {} });\n\tconst currMiddleImgRef = React.useRef(0);\n\tconst intervalRef = React.useRef(0);\n\tconst imgDifference = React.useRef(1);\n\tconst durationRef = React.useRef(duration);\n\tconst wrapper = React.useRef();\n\n\tconst parentHeight = img_height + 2 * parentPad;\n\tconst parentWidth = img_width * 3;\n\tconst elementsInLeft = Math.ceil(visibleImages / 2);\n\tconst elementsInRight = visibleImages - elementsInLeft;\n\n\tconst changeCenter = ({ event, index }) => {\n\t\tconst currFirstImgIndex = visibleItemsProps.order.indexOf(currFirstImg);\n\t\tconst prevIndex = visibleItemsProps.order[currFirstImgIndex - 1];\n\t\tconst nextIndex = visibleItemsProps.order[currFirstImgIndex + 1];\n\t\tif (index !== currFirstImg) {\n\t\t\tif (index === prevIndex || index === nextIndex) {\n\t\t\t\tsetCurrFirstImg(index);\n\t\t\t} else {\n\t\t\t\tconst val = currFirstImgIndex - visibleItemsProps.order.indexOf(index);\n\t\t\t\timgDifference.current = Math.abs(val);\n\t\t\t\tsetActualFirst(index);\n\t\t\t\tcycleToNextImage(index);\n\t\t\t}\n\t\t} else {\n\t\t\tnull;\n\t\t}\n\t}\n\n\tconst cycleToNextImage = (actual) => {\n\t\tif (visibleItemsProps.order.indexOf(currMiddleImgRef.current) > visibleItemsProps.order.indexOf(actual)) {\n\t\t\t// Right side image click\n\t\t\tcurrMiddleImgRef.current = currMiddleImgRef.current - 1 > -1 ? currMiddleImgRef.current - 1 : imgList.length - 1;\n\t\t\t// Right side image click\n\t\t\tsetCurrFirstImg(currMiddleImgRef.current);\n\t\t} else {\n\t\t\t// Left side image click\n\t\t\tcurrMiddleImgRef.current = (currMiddleImgRef.current + 1) < imgList.length ? (currMiddleImgRef.current + 1) : 0;\n\t\t\t// Conditions to handle cycle\n\t\t\tsetCurrFirstImg(currMiddleImgRef.current);\n\t\t}\n\t}\n\tconst gapBetween = props.name === 'team' ? 4 : 4.4 \n\tconst constructVisibleItemsProps = () => {\n\t\tconst visibleItemsProps = {};\n\t\t// To store config for items that are visibile in the carousel\n\t\tvisibleItemsProps.order = [];\n\t\tlet curr_center = currFirstImg;\n\t\t// Storing the Current Middle element in focus\n\t\tlet timesToIterate = 0;\n\t\t// To iterate through all visible number of images.\n\t\tlet zIndex = - elementsInRight;\n\t\t// We start from left to right and Zindex has to keep on increasing till middle then has to reduce.\n\t\tlet xTranslate = img_width;\n\t\t// To move the element with respect to x axis\n\t\tlet zTranslate = 0;\n\t\t// To reduce image size for images apart from center\n\t\tlet opacity = 1;\n\t\t// ARALIKLAR BURADA = 4\n\t\tconst division = (img_width * (4.2 / elementsInLeft));\n\t\t// Specifies the length that next image has to move away from with respect to current image (1.6 times the current image)\n\t\tlet opacityDivider = (1 / elementsInRight);\n\t\t// minimum opacity should be 0.3 (1-0.7)\n\t\tlet rightEltCount = elementsInRight;\n\t\tlet leftEltCount = elementsInLeft;\n\t\t// including middle element\n\t\tlet curr_center_copy = curr_center;\n\n\t\twhile (timesToIterate < visibleImages) {\n\t\t\tconst styles = {};\n\t\t\tlet currImgIndex;\n\t\t\tlet currImgIndexOnRight = true;\n\t\t\t// Tells if in this iteration the currently iterated image lies left to the middle image or not\n\n\t\t\t// To set properties for elements in right side\n\t\t\tif (timesToIterate < elementsInRight) {\n\t\t\t\tconst nextIndex = curr_center - (rightEltCount);\n\t\t\t\tcurrImgIndex = nextIndex > -1 ? nextIndex : imgList.length - Math.abs(nextIndex);\n\t\t\t\t// Gives the rightmost elemnt in first iteration and then the subsequent elements down the iteration\n\t\t\t\topacity = 1 - (opacityDivider * rightEltCount);\n\t\t\t\t// To assign lowest opacity to last element and increaing it till we come to middle\n\t\t\t\tzTranslate = -division * rightEltCount;\n\t\t\t\t// To increase the size of the images subsequently from last to middle\n\t\t\t\txTranslate = img_width - (division * rightEltCount);\n\t\t\t\t// X coordinate position\n\t\t\t\trightEltCount--;\n\t\t\t} else {\n\t\t\t\t// To set properties for elements in center and to left of it. All props behaves similar to right\n\t\t\t\tcurrImgIndexOnRight = false;\n\t\t\t\tcurrImgIndex = curr_center_copy;\n\t\t\t\tif (curr_center_copy + 1 >= imgList.length) {\n\t\t\t\t\t// to maintain cyclic carousel\n\t\t\t\t\tcurr_center_copy = 0;\n\t\t\t\t} else {\n\t\t\t\t\tcurr_center_copy++;\n\t\t\t\t}\n\t\t\t\topacity = 1 - (opacityDivider * Math.abs(leftEltCount - (timesToIterate + 1)));\n\t\t\t\tzTranslate = - division * Math.abs(leftEltCount - (timesToIterate + 1));\n\t\t\t\txTranslate = img_width + division * Math.abs(leftEltCount - (timesToIterate + 1));\n\t\t\t}\n\n\t\t\t// Assigning above calculated values to 'styles' object\n\t\t\tstyles.transform = 'translateX(' + xTranslate + 'px) translateZ(' + zTranslate + 'px)';\n\t\t\tstyles.opacity = opacity;\n\t\t\tstyles.zIndex = currImgIndexOnRight ? zIndex++ : zIndex--;\n\t\t\t// To reduce zIndex while going through left elements\n\t\t\tvisibleItemsProps.order.push(currImgIndex);\n\t\t\t// Push the current image number in the orders array\n\t\t\tvisibleItemsProps[currImgIndex] = { styles };\n\t\t\t// pushing all previously created styles\n\t\t\ttimesToIterate++;\n\t\t}\n\t\tdurationRef.current = actualFirst === '' ? duration : ((duration / imgDifference.current));\n\t\t// duration will be user given if he clicks next image or\n\t\t// we divide the duration by number of images skipped\n\t\tsetVisibleItemsProps(visibleItemsProps);\n\t\t// setting state for visible items\n\t}\n\n\tReact.useEffect(() => {\n\t\tclearInterval(intervalRef.current);\n\t\tif (actualFirst !== '') {\n\t\t\tintervalRef.current = setInterval(() => {\n\t\t\t\tif (actualFirst !== '' && actualFirst !== currMiddleImgRef.current) {\n\t\t\t\t\t// If the currentimage in middle is not actually clicked image then gotoNext image\n\t\t\t\t\tcycleToNextImage(actualFirst);\n\t\t\t\t} else if (actualFirst !== '' && actualFirst === currMiddleImgRef.current) {\n\t\t\t\t\tsetActualFirst('');\n\t\t\t\t\timgDifference.current = 1;\n\t\t\t\t\tclearInterval(intervalRef.current);\n\t\t\t\t\t// If actual clicked and middle image are same we are all set to clear intervals, as they are unnecessary now\n\t\t\t\t}\n\t\t\t}, durationRef.current - 100);\n\t\t\t// Introduced an advance of 100ms to begin bringing nextimage\n\t\t\t// to middle before the previous one settles down else it looks jerky\n\t\t}\n\t}, [actualFirst]);\n\n\tReact.useEffect(() => {\n\t\tconstructVisibleItemsProps();\n\t\t// This constructs all css properties to the elements in visibility\n\t\tcurrMiddleImgRef.current = currFirstImg;\n\t\t// Need to set it here as well so while accessing inside interval it will have the latest value\n\t}, [currFirstImg]);\n\n\tReact.useEffect(() => {\n\t\tif (autoNext) {\n\t\t\tsetInterval(() => {\n\t\t\t\tconst nextImg = currMiddleImgRef.current + 1 < imgList.length ? currMiddleImgRef.current + 1 : 0;\n\t\t\t\tsetCurrFirstImg(nextImg);\n\t\t\t}, timeForNext);\n\t\t}\n\t}, []);\n\n\tconst [middleImageKey, setMiddleImageKey] = React.useState(0);\n\n\tconst loadCarousel = () => {\n\t\treturn (\n\t\t\t<div className={`carousel__3D carousel__3D--${props.name}`}>\n\t\t\t\t<ul ref={wrapper}\n\t\t\t\t\tclassName=\"carousel__wrapper\"\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\theight: parentHeight + 'px',\n\t\t\t\t\t\twidth: parentWidth + 'px',\n\t\t\t\t\t\tpadding: parentPad + 'px',\n\t\t\t\t\t\tperspective: '500px'\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t{\n\t\t\t\t\t\timgList.map((image, index) => {\n\t\t\t\t\t\t\tconst displayNone = visibleItemsProps.order.indexOf(index) === -1;\n\t\t\t\t\t\t\t// To not to show images that are out of visibility scope\n\t\t\t\t\t\t\tconst styles = visibleItemsProps[index] ? visibleItemsProps[index].styles : {};\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<li key={index}\n\t\t\t\t\t\t\t\t\tclassName={'carousel__item ' + (displayNone ? 'd-none' : '')}\n\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\t...styles,\n\t\t\t\t\t\t\t\t\t\tposition: 'absolute',\n\t\t\t\t\t\t\t\t\t\ttransition: `all ${durationRef.current}ms ease `\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\t\t\t\tchangeCenter({ e, index })\n\t\t\t\t\t\t\t\t\t\tsetMiddleImageKey(index)\n\t\t\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t\t\t<img src={image} alt={'img'} width={img_width} height={img_height} />\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t</ul>\n\t\t\t\t<div\n\t\t\t\t\tclassName={`carousel__infos carousel__infos--${props.name}`}>\n\t\t\t\t\t{props.name === \"team\"\n\n\t\t\t\t\t\t? (\n\n\t\t\t\t\t\t\tprops.data.map((item, key) => (\n\t\t\t\t\t\t\t\tkey === middleImageKey &&\n\t\t\t\t\t\t\t\t<div key={key} className=\"infos__item\">\n\t\t\t\t\t\t\t\t\t<h3>{item.mitarbeiter_name}</h3>\n\t\t\t\t\t\t\t\t\t<h4>{item.mitarbeiter_titel}</h4>\n\t\t\t\t\t\t\t\t\t<Obfuscate email={item.mitarbeiter_email} />\n\t\t\t\t\t\t\t\t\t<Obfuscate tel={item.mitarbeiter_telefon} />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t))\n\n\t\t\t\t\t\t) : (\n\n\t\t\t\t\t\t\tprops.data.map((item, key) => (\n\t\t\t\t\t\t\t\tkey === middleImageKey &&\n\t\t\t\t\t\t\t\t<div key={key} className=\"infos__item infos__item--downloads\">\n\t\t\t\t\t\t\t\t\t<h4>{item.name}</h4>\n\t\t\t\t\t\t\t\t\t<a href={item.link} target=\"_blank\" className=\"singleloc__button\">\n\t\t\t\t\t\t\t\t\t\t<Icon type=\"factsheet\" name=\"DOWNLOAD\" />\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t))\n\n\t\t\t\t\t\t)\n\n\t\t\t\t\t}\n\t\t\t\t</div>\n\n\t\t\t\t{\n\t\t\t\t\tprops.name === \"downloads\" &&\n\t\t\t\t\t<div className=\"download__section--factsheet\">\n\t\t\t\t\t\t<h2>Factsheets</h2>\n\t\t\t\t\t\t{parse(props.content.Inhalt)}\n\t\t\t\t\t</div>\n\t\t\t\t}\n\n\t\t\t</div>\n\t\t);\n\t};\n\n\treturn (\n\t\t<>\n\t\t\t{loadCarousel()}\n\t\t</>\n\t);\n}"]},"metadata":{},"sourceType":"module"}